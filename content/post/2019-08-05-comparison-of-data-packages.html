---
title: Comparison of data manipulation with different R and Python packages
author: Omer Acar
date: '2019-08-05'
slug: comparison-of-data-packages
categories:
  - R
  - Python
tags:
  - dplyr
  - data.table
  - pandas
  - R
  - python
subtitle: ''
summary: ''
authors: []
lastmod: '2019-08-05T14:41:37-04:00'
featured: no
image:
  caption: ''
  focal_point: ''
  preview_only: no
projects: []
---



<p>I have been using tidyverse functions with dplyr or tidyr for data manipulation mainly. However there are times where I had to use Python for due to need for a specific package or collaboration with people using only Python, thus needed to use Pandas for similar purposes. However I am in no way a Python expert and everytime I needed to look up a lot of basic things and end up just going back and forth between Python and R. Here I wanted to create a reference page with examples for myself and people who are interested in same things to use Pandas and Tidyverse functions for data manipulation purposes.</p>
<p>First to use python in R markdown, I use RStudio and reticulate</p>
<pre class="r"><code>library(reticulate)
use_condaenv(&quot;r-reticulate&quot;)</code></pre>
<p>Then let’s load the libraries and get the data:</p>
<pre class="r"><code>library(dplyr)
library(data.table)
data(&quot;iris&quot;)
#iris</code></pre>
<pre class="python"><code>import pandas as pd
iris = pd.read_csv(&#39;https://raw.githubusercontent.com/mwaskom/seaborn-data/master/iris.csv&#39;)
iris</code></pre>
<pre><code>##      sepal_length  sepal_width  petal_length  petal_width    species
## 0             5.1          3.5           1.4          0.2     setosa
## 1             4.9          3.0           1.4          0.2     setosa
## 2             4.7          3.2           1.3          0.2     setosa
## 3             4.6          3.1           1.5          0.2     setosa
## 4             5.0          3.6           1.4          0.2     setosa
## ..            ...          ...           ...          ...        ...
## 145           6.7          3.0           5.2          2.3  virginica
## 146           6.3          2.5           5.0          1.9  virginica
## 147           6.5          3.0           5.2          2.0  virginica
## 148           6.2          3.4           5.4          2.3  virginica
## 149           5.9          3.0           5.1          1.8  virginica
## 
## [150 rows x 5 columns]</code></pre>
<p>Tidyverse functions are usually self-explained. To get rows with a condition there is a <code>filter</code> function, to extract a column from data frame there is <code>select</code>. <code>mutate</code> is used for adding new columns to dataframe based on values on other columns or as I use most of time with external <code>ifelse</code> statements. Let’s see how these functions and uses are in both languages.
To actually compare functions and to not confuse people who are not familiar with pipes in tidyverse, I will omit using pipes and use dataframes as arguments to functions.</p>
<div id="filter" class="section level2">
<h2>Filter</h2>
<pre class="r"><code>iris_sepal_long &lt;- filter(iris, Sepal.Length&gt;5)
head(iris_sepal_long)</code></pre>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          5.4         3.9          1.7         0.4  setosa
## 3          5.4         3.7          1.5         0.2  setosa
## 4          5.8         4.0          1.2         0.2  setosa
## 5          5.7         4.4          1.5         0.4  setosa
## 6          5.4         3.9          1.3         0.4  setosa</code></pre>
<pre class="python"><code>iris_sepal_long = iris[iris.sepal_length&gt;5]
iris_sepal_long</code></pre>
<pre><code>##      sepal_length  sepal_width  petal_length  petal_width    species
## 0             5.1          3.5           1.4          0.2     setosa
## 5             5.4          3.9           1.7          0.4     setosa
## 10            5.4          3.7           1.5          0.2     setosa
## 14            5.8          4.0           1.2          0.2     setosa
## 15            5.7          4.4           1.5          0.4     setosa
## ..            ...          ...           ...          ...        ...
## 145           6.7          3.0           5.2          2.3  virginica
## 146           6.3          2.5           5.0          1.9  virginica
## 147           6.5          3.0           5.2          2.0  virginica
## 148           6.2          3.4           5.4          2.3  virginica
## 149           5.9          3.0           5.1          1.8  virginica
## 
## [118 rows x 5 columns]</code></pre>
<p>Any logical statements combined with logical <code>OR</code> or <code>AND</code> statements can be used when filtering data frame. I’ll show with python but same applies to R as well.</p>
<pre class="python"><code>iris_sepal_filter = iris[(iris.sepal_length&gt;5)&amp;(iris.sepal_width&lt;4)&amp;(iris.species==&#39;setosa&#39;)]
iris_sepal_filter</code></pre>
<pre><code>##     sepal_length  sepal_width  petal_length  petal_width species
## 0            5.1          3.5           1.4          0.2  setosa
## 5            5.4          3.9           1.7          0.4  setosa
## 10           5.4          3.7           1.5          0.2  setosa
## 16           5.4          3.9           1.3          0.4  setosa
## 17           5.1          3.5           1.4          0.3  setosa
## 18           5.7          3.8           1.7          0.3  setosa
## 19           5.1          3.8           1.5          0.3  setosa
## 20           5.4          3.4           1.7          0.2  setosa
## 21           5.1          3.7           1.5          0.4  setosa
## 23           5.1          3.3           1.7          0.5  setosa
## 27           5.2          3.5           1.5          0.2  setosa
## 28           5.2          3.4           1.4          0.2  setosa
## 31           5.4          3.4           1.5          0.4  setosa
## 36           5.5          3.5           1.3          0.2  setosa
## 39           5.1          3.4           1.5          0.2  setosa
## 44           5.1          3.8           1.9          0.4  setosa
## 46           5.1          3.8           1.6          0.2  setosa
## 48           5.3          3.7           1.5          0.2  setosa</code></pre>
</div>
<div id="mutate" class="section level2">
<h2>Mutate</h2>
<pre class="r"><code>#iris$newcolumn &lt;- iris$Sepal.Length/iris$Sepal.Width
iris_sepal_length_over_width &lt;- mutate(iris,sepal_length_over_width = Sepal.Length / Sepal.Width)
head(iris_sepal_length_over_width)</code></pre>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 6          5.4         3.9          1.7         0.4  setosa
##   sepal_length_over_width
## 1                1.457143
## 2                1.633333
## 3                1.468750
## 4                1.483871
## 5                1.388889
## 6                1.384615</code></pre>
<pre class="python"><code>iris_sepal_length_over_width = iris.assign(sepal_length_over_width = iris.sepal_length / iris.sepal_width)
iris_sepal_length_over_width</code></pre>
<pre><code>##      sepal_length  sepal_width  ...    species  sepal_length_over_width
## 0             5.1          3.5  ...     setosa                 1.457143
## 1             4.9          3.0  ...     setosa                 1.633333
## 2             4.7          3.2  ...     setosa                 1.468750
## 3             4.6          3.1  ...     setosa                 1.483871
## 4             5.0          3.6  ...     setosa                 1.388889
## ..            ...          ...  ...        ...                      ...
## 145           6.7          3.0  ...  virginica                 2.233333
## 146           6.3          2.5  ...  virginica                 2.520000
## 147           6.5          3.0  ...  virginica                 2.166667
## 148           6.2          3.4  ...  virginica                 1.823529
## 149           5.9          3.0  ...  virginica                 1.966667
## 
## [150 rows x 6 columns]</code></pre>
</div>
<div id="select" class="section level2">
<h2>Select</h2>
<p>This is one of the most important functions if when dealing with data frames.</p>
<pre class="r"><code>sepal_data &lt;- select(iris,Sepal.Length,Sepal.Width)
head(sepal_data)</code></pre>
<pre><code>##   Sepal.Length Sepal.Width
## 1          5.1         3.5
## 2          4.9         3.0
## 3          4.7         3.2
## 4          4.6         3.1
## 5          5.0         3.6
## 6          5.4         3.9</code></pre>
<pre class="python"><code>sepal_data = iris[[&#39;sepal_length&#39;,&#39;sepal_width&#39;]]
sepal_data</code></pre>
<pre><code>##      sepal_length  sepal_width
## 0             5.1          3.5
## 1             4.9          3.0
## 2             4.7          3.2
## 3             4.6          3.1
## 4             5.0          3.6
## ..            ...          ...
## 145           6.7          3.0
## 146           6.3          2.5
## 147           6.5          3.0
## 148           6.2          3.4
## 149           5.9          3.0
## 
## [150 rows x 2 columns]</code></pre>
<p>However one thing I do a lot when using <code>select</code> getting a column and turn it into a vector because <code>select</code> returns a data frame with a signle column, for quick plotting with base R functions.</p>
<pre class="r"><code>sepal_width_vector &lt;- pull(select(iris,Sepal.Width))
head(sepal_width_vector)</code></pre>
<pre><code>## [1] 3.5 3.0 3.2 3.1 3.6 3.9</code></pre>
<pre class="r"><code>hist(sepal_width_vector)</code></pre>
<p><img src="/post/2019-08-05-comparison-of-data-packages_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<pre class="python"><code>sepal_width_vec = iris.sepal_width.tolist()
sepal_width_vec</code></pre>
<pre><code>## [3.5, 3.0, 3.2, 3.1, 3.6, 3.9, 3.4, 3.4, 2.9, 3.1, 3.7, 3.4, 3.0, 3.0, 4.0, 4.4, 3.9, 3.5, 3.8, 3.8, 3.4, 3.7, 3.6, 3.3, 3.4, 3.0, 3.4, 3.5, 3.4, 3.2, 3.1, 3.4, 4.1, 4.2, 3.1, 3.2, 3.5, 3.6, 3.0, 3.4, 3.5, 2.3, 3.2, 3.5, 3.8, 3.0, 3.8, 3.2, 3.7, 3.3, 3.2, 3.2, 3.1, 2.3, 2.8, 2.8, 3.3, 2.4, 2.9, 2.7, 2.0, 3.0, 2.2, 2.9, 2.9, 3.1, 3.0, 2.7, 2.2, 2.5, 3.2, 2.8, 2.5, 2.8, 2.9, 3.0, 2.8, 3.0, 2.9, 2.6, 2.4, 2.4, 2.7, 2.7, 3.0, 3.4, 3.1, 2.3, 3.0, 2.5, 2.6, 3.0, 2.6, 2.3, 2.7, 3.0, 2.9, 2.9, 2.5, 2.8, 3.3, 2.7, 3.0, 2.9, 3.0, 3.0, 2.5, 2.9, 2.5, 3.6, 3.2, 2.7, 3.0, 2.5, 2.8, 3.2, 3.0, 3.8, 2.6, 2.2, 3.2, 2.8, 2.8, 2.7, 3.3, 3.2, 2.8, 3.0, 2.8, 3.0, 2.8, 3.8, 2.8, 2.8, 2.6, 3.0, 3.4, 3.1, 3.0, 3.1, 3.1, 3.1, 2.7, 3.2, 3.3, 3.0, 2.5, 3.0, 3.4, 3.0]</code></pre>
<pre class="python"><code>import seaborn as sns

sns.set_style(&#39;darkgrid&#39;)
sns.distplot(sepal_width_vec)</code></pre>
<p><img src="/post/2019-08-05-comparison-of-data-packages_files/figure-html/unnamed-chunk-13-1.png" /><!-- --></p>
</div>
<div id="sorting" class="section level2">
<h2>Sorting</h2>
<pre class="r"><code>arrange(iris)</code></pre>
<pre><code>##     Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
## 1            5.1         3.5          1.4         0.2     setosa
## 2            4.9         3.0          1.4         0.2     setosa
## 3            4.7         3.2          1.3         0.2     setosa
## 4            4.6         3.1          1.5         0.2     setosa
## 5            5.0         3.6          1.4         0.2     setosa
## 6            5.4         3.9          1.7         0.4     setosa
## 7            4.6         3.4          1.4         0.3     setosa
## 8            5.0         3.4          1.5         0.2     setosa
## 9            4.4         2.9          1.4         0.2     setosa
## 10           4.9         3.1          1.5         0.1     setosa
## 11           5.4         3.7          1.5         0.2     setosa
## 12           4.8         3.4          1.6         0.2     setosa
## 13           4.8         3.0          1.4         0.1     setosa
## 14           4.3         3.0          1.1         0.1     setosa
## 15           5.8         4.0          1.2         0.2     setosa
## 16           5.7         4.4          1.5         0.4     setosa
## 17           5.4         3.9          1.3         0.4     setosa
## 18           5.1         3.5          1.4         0.3     setosa
## 19           5.7         3.8          1.7         0.3     setosa
## 20           5.1         3.8          1.5         0.3     setosa
## 21           5.4         3.4          1.7         0.2     setosa
## 22           5.1         3.7          1.5         0.4     setosa
## 23           4.6         3.6          1.0         0.2     setosa
## 24           5.1         3.3          1.7         0.5     setosa
## 25           4.8         3.4          1.9         0.2     setosa
## 26           5.0         3.0          1.6         0.2     setosa
## 27           5.0         3.4          1.6         0.4     setosa
## 28           5.2         3.5          1.5         0.2     setosa
## 29           5.2         3.4          1.4         0.2     setosa
## 30           4.7         3.2          1.6         0.2     setosa
## 31           4.8         3.1          1.6         0.2     setosa
## 32           5.4         3.4          1.5         0.4     setosa
## 33           5.2         4.1          1.5         0.1     setosa
## 34           5.5         4.2          1.4         0.2     setosa
## 35           4.9         3.1          1.5         0.2     setosa
## 36           5.0         3.2          1.2         0.2     setosa
## 37           5.5         3.5          1.3         0.2     setosa
## 38           4.9         3.6          1.4         0.1     setosa
## 39           4.4         3.0          1.3         0.2     setosa
## 40           5.1         3.4          1.5         0.2     setosa
## 41           5.0         3.5          1.3         0.3     setosa
## 42           4.5         2.3          1.3         0.3     setosa
## 43           4.4         3.2          1.3         0.2     setosa
## 44           5.0         3.5          1.6         0.6     setosa
## 45           5.1         3.8          1.9         0.4     setosa
## 46           4.8         3.0          1.4         0.3     setosa
## 47           5.1         3.8          1.6         0.2     setosa
## 48           4.6         3.2          1.4         0.2     setosa
## 49           5.3         3.7          1.5         0.2     setosa
## 50           5.0         3.3          1.4         0.2     setosa
## 51           7.0         3.2          4.7         1.4 versicolor
## 52           6.4         3.2          4.5         1.5 versicolor
## 53           6.9         3.1          4.9         1.5 versicolor
## 54           5.5         2.3          4.0         1.3 versicolor
## 55           6.5         2.8          4.6         1.5 versicolor
## 56           5.7         2.8          4.5         1.3 versicolor
## 57           6.3         3.3          4.7         1.6 versicolor
## 58           4.9         2.4          3.3         1.0 versicolor
## 59           6.6         2.9          4.6         1.3 versicolor
## 60           5.2         2.7          3.9         1.4 versicolor
## 61           5.0         2.0          3.5         1.0 versicolor
## 62           5.9         3.0          4.2         1.5 versicolor
## 63           6.0         2.2          4.0         1.0 versicolor
## 64           6.1         2.9          4.7         1.4 versicolor
## 65           5.6         2.9          3.6         1.3 versicolor
## 66           6.7         3.1          4.4         1.4 versicolor
## 67           5.6         3.0          4.5         1.5 versicolor
## 68           5.8         2.7          4.1         1.0 versicolor
## 69           6.2         2.2          4.5         1.5 versicolor
## 70           5.6         2.5          3.9         1.1 versicolor
## 71           5.9         3.2          4.8         1.8 versicolor
## 72           6.1         2.8          4.0         1.3 versicolor
## 73           6.3         2.5          4.9         1.5 versicolor
## 74           6.1         2.8          4.7         1.2 versicolor
## 75           6.4         2.9          4.3         1.3 versicolor
## 76           6.6         3.0          4.4         1.4 versicolor
## 77           6.8         2.8          4.8         1.4 versicolor
## 78           6.7         3.0          5.0         1.7 versicolor
## 79           6.0         2.9          4.5         1.5 versicolor
## 80           5.7         2.6          3.5         1.0 versicolor
## 81           5.5         2.4          3.8         1.1 versicolor
## 82           5.5         2.4          3.7         1.0 versicolor
## 83           5.8         2.7          3.9         1.2 versicolor
## 84           6.0         2.7          5.1         1.6 versicolor
## 85           5.4         3.0          4.5         1.5 versicolor
## 86           6.0         3.4          4.5         1.6 versicolor
## 87           6.7         3.1          4.7         1.5 versicolor
## 88           6.3         2.3          4.4         1.3 versicolor
## 89           5.6         3.0          4.1         1.3 versicolor
## 90           5.5         2.5          4.0         1.3 versicolor
## 91           5.5         2.6          4.4         1.2 versicolor
## 92           6.1         3.0          4.6         1.4 versicolor
## 93           5.8         2.6          4.0         1.2 versicolor
## 94           5.0         2.3          3.3         1.0 versicolor
## 95           5.6         2.7          4.2         1.3 versicolor
## 96           5.7         3.0          4.2         1.2 versicolor
## 97           5.7         2.9          4.2         1.3 versicolor
## 98           6.2         2.9          4.3         1.3 versicolor
## 99           5.1         2.5          3.0         1.1 versicolor
## 100          5.7         2.8          4.1         1.3 versicolor
## 101          6.3         3.3          6.0         2.5  virginica
## 102          5.8         2.7          5.1         1.9  virginica
## 103          7.1         3.0          5.9         2.1  virginica
## 104          6.3         2.9          5.6         1.8  virginica
## 105          6.5         3.0          5.8         2.2  virginica
## 106          7.6         3.0          6.6         2.1  virginica
## 107          4.9         2.5          4.5         1.7  virginica
## 108          7.3         2.9          6.3         1.8  virginica
## 109          6.7         2.5          5.8         1.8  virginica
## 110          7.2         3.6          6.1         2.5  virginica
## 111          6.5         3.2          5.1         2.0  virginica
## 112          6.4         2.7          5.3         1.9  virginica
## 113          6.8         3.0          5.5         2.1  virginica
## 114          5.7         2.5          5.0         2.0  virginica
## 115          5.8         2.8          5.1         2.4  virginica
## 116          6.4         3.2          5.3         2.3  virginica
## 117          6.5         3.0          5.5         1.8  virginica
## 118          7.7         3.8          6.7         2.2  virginica
## 119          7.7         2.6          6.9         2.3  virginica
## 120          6.0         2.2          5.0         1.5  virginica
## 121          6.9         3.2          5.7         2.3  virginica
## 122          5.6         2.8          4.9         2.0  virginica
## 123          7.7         2.8          6.7         2.0  virginica
## 124          6.3         2.7          4.9         1.8  virginica
## 125          6.7         3.3          5.7         2.1  virginica
## 126          7.2         3.2          6.0         1.8  virginica
## 127          6.2         2.8          4.8         1.8  virginica
## 128          6.1         3.0          4.9         1.8  virginica
## 129          6.4         2.8          5.6         2.1  virginica
## 130          7.2         3.0          5.8         1.6  virginica
## 131          7.4         2.8          6.1         1.9  virginica
## 132          7.9         3.8          6.4         2.0  virginica
## 133          6.4         2.8          5.6         2.2  virginica
## 134          6.3         2.8          5.1         1.5  virginica
## 135          6.1         2.6          5.6         1.4  virginica
## 136          7.7         3.0          6.1         2.3  virginica
## 137          6.3         3.4          5.6         2.4  virginica
## 138          6.4         3.1          5.5         1.8  virginica
## 139          6.0         3.0          4.8         1.8  virginica
## 140          6.9         3.1          5.4         2.1  virginica
## 141          6.7         3.1          5.6         2.4  virginica
## 142          6.9         3.1          5.1         2.3  virginica
## 143          5.8         2.7          5.1         1.9  virginica
## 144          6.8         3.2          5.9         2.3  virginica
## 145          6.7         3.3          5.7         2.5  virginica
## 146          6.7         3.0          5.2         2.3  virginica
## 147          6.3         2.5          5.0         1.9  virginica
## 148          6.5         3.0          5.2         2.0  virginica
## 149          6.2         3.4          5.4         2.3  virginica
## 150          5.9         3.0          5.1         1.8  virginica</code></pre>
</div>
<div id="summarizing-data-with-groups" class="section level2">
<h2>Summarizing data with groups</h2>
</div>
